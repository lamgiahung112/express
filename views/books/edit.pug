extends ../layouts/common

block content
   h2 Edit book

   if error
      div= error
   form(action="/books/" + book._id + "?_method=PUT" method="POST")
      div
         label Title
         input(type="text" name="title" value= book.title)
      div
         label Author
         select(name="author")
            option(disabled) Choose author
            each author in authors
               if author._id == book.author
                  option(selected value= author._id)= author.name
               else
                  option(value= author._id)= author.name
      div
         label Publish Date
         input(type="date" name="publishDate" 
                              value= book.publishDate ? new Date(book.publishDate).toISOString().split('T')[0] : '')
      div
         label Page Count
         input(type="number" name="pageCount" value= book.pageCount min="1")
      div
         label Description
         textarea(name="description", rows="10")= book.description
      div
         input.filepond(type="file" name="cover")
      a(href="/books") Cancel
      button(type="submit") Update